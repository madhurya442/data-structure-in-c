#include <stdio.h>
#include <stdlib.h>

// Function to duplicate a string using malloc and pointer copying
char* my_strdup(char *src) {
    char *dup;
    int len = 0;

    // Find length of the source string
    char *temp = src;
    while (*temp != '\0') {
        len++;
        temp++;
    }

    // Allocate memory for the duplicate string (+1 for '\0')
    dup = (char *)malloc((len + 1) * sizeof(char));
    if (dup == NULL) {
        printf("Memory not allocated.\n");
        return NULL;
    }

    // Copy characters using pointer arithmetic
    char *d = dup;
    while (*src != '\0') {
        *d = *src;
        d++;
        src++;
    }
    *d = '\0';  // Null terminate the string

    return dup;
}

int main() {
    char str[100];

    // Print name and USN first
    printf("Program by: Madhurya\n");
    printf("USN: 1SV24CS066\n\n");

    printf("Enter a string: ");
    fgets(str, sizeof(str), stdin); // safe input method

    // Remove newline if present
    char *newline = str;
    while (*newline != '\0') {
        if (*newline == '\n') {
            *newline = '\0';
            break;
        }
        newline++;
    }

    // Duplicate the string
    char *copy = my_strdup(str);
    if (copy != NULL) {
        printf("\nOriginal string: %s\n", str);
        printf("Duplicated string: %s\n", copy);
        free(copy); // Free allocated memory
    }

    return 0;
}
