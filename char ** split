#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char** split(char *str, char delim, int *count) {
    char **tokens = NULL;
    int capacity = 0;
    *count = 0;

    char *start = str;
    for (int i = 0; ; i++) {
        if (str[i] == delim || str[i] == '\0') {
            int len = &str[i] - start;
            char *token = (char *)malloc(len + 1);
            strncpy(token, start, len);
            token[len] = '\0';

            if (*count >= capacity) {
                capacity = (capacity == 0) ? 2 : capacity * 2;
                tokens = (char **)realloc(tokens, capacity * sizeof(char *));
            }

            tokens[*count] = token;
            (*count)++;

            if (str[i] == '\0')
                break;
            start = &str[i + 1];
        }
    }
    return tokens;
}

int main() {
    char str[100], delim;
    int count;

    printf("Name: Madhurya, USN: 1SV24CS066\n");
    printf("Enter string: ");
    fgets(str, sizeof(str), stdin);
    str[strcspn(str, "\n")] = 0; // remove newline

    printf("Enter delimiter: ");
    scanf(" %c", &delim);

    char **result = split(str, delim, &count);

    printf("\nTokens (%d):\n", count);
    for (int i = 0; i < count; i++) {
        printf("%s\n", result[i]);
        free(result[i]);
    }
    free(result);

    return 0;
}
